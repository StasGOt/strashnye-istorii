<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>–°—Ç—Ä–∞—à–Ω—ã–µ –∏—Å—Ç–æ—Ä–∏–∏</title>
    <meta name="description" content="–°—Ç—Ä–∞—à–Ω—ã–µ –∏—Å—Ç–æ—Ä–∏–∏ ‚Äî —Å–æ–±—Ä–∞–Ω–∏–µ —Å–∞–º—ã—Ö –∂—É—Ç–∫–∏—Ö —Ä–∞—Å—Å–∫–∞–∑–æ–≤ —Å –ø—Ä–æ—Å—Ç–æ—Ä–æ–≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞. –ö–æ—Ä–æ—Ç–∫–∏–µ —Å—Ç—Ä–∞—à–∏–ª–∫–∏, –º–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å—Ç–æ—Ä–∏–∏, –ø—É–≥–∞—é—â–∏–µ –ª–µ–≥–µ–Ω–¥—ã.">
    <meta name="keywords" content="—Å—Ç—Ä–∞—à–Ω—ã–µ –∏—Å—Ç–æ—Ä–∏–∏, —Å—Ç—Ä–∞—à–∏–ª–∫–∏, —É–∂–∞—Å—ã, –º–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ —Ä–∞—Å—Å–∫–∞–∑—ã, —Ö–æ—Ä—Ä–æ—Ä, –ø—É–≥–∞—é—â–∏–µ –∏—Å—Ç–æ—Ä–∏–∏, –ª–µ–≥–µ–Ω–¥—ã, –∏–Ω—Ç–µ—Ä–Ω–µ—Ç –∏—Å—Ç–æ—Ä–∏–∏">
    <link rel="icon" type="image/png" href="favicon.png" />
    <link rel="stylesheet" href="style.css">
    <style>
      .fixed-header {
        position: fixed;
        top: 0; left: 0; right: 0;
        z-index: 2000;
        background: #181818ee;
        color: #fff;
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 0 24px;
        height: 60px;
        box-shadow: 0 2px 12px #000a;
      }
      .fixed-header .nav-left {
        display: flex;
        align-items: center;
        gap: 18px;
      }
      .fixed-header .nav-title {
        font-size: 1.25rem;
        font-weight: bold;
        letter-spacing: 1px;
        text-shadow: 0 2px 8px #000a;
      }
      .fixed-header a, .fixed-header select, .fixed-header button {
        color: #fff;
        background: none;
        border: none;
        font-size: 1rem;
        text-decoration: none;
        margin: 0;
        cursor: pointer;
        border-radius: 6px;
        padding: 5px 10px;
        transition: background 0.2s;
        box-sizing: border-box;
        vertical-align: middle;
        line-height: 1.2;
      }
      .fixed-header a:hover, .fixed-header select:hover, .fixed-header button:hover {
        background: #232323;
      }
      .fixed-header select {
        color: #232323;
        background: #fff;
        min-width: 120px;
        margin-right: 0;
        margin-left: 0;
        padding: 5px 10px;
        height: 32px;
      }
      .fixed-header .nav-right {
        display: flex;
        align-items: center;
        gap: 12px;
      }
      .fixed-header button {
        background: #232323;
        color: #fff;
        border: none;
        padding: 5px 12px;
        margin: 0;
        min-width: 0;
        height: 32px;
        font-size: 1rem;
      }
      .fixed-header button:hover {
        background: #333;
      }
      @media (max-width: 900px) {
        .fixed-header {
          flex-direction: column;
          height: auto;
          padding: 8px 4vw;
        }
        .fixed-header .nav-left, .fixed-header .nav-right {
          flex-direction: column;
          gap: 6px;
          align-items: flex-start;
          width: 100%;
        }
        .fixed-header .nav-right {
          align-items: flex-start;
          width: 100%;
        }
        .fixed-header .nav-title { font-size: 1rem; }
        .fixed-header a, .fixed-header select, .fixed-header button {
          width: 100%;
          margin: 0 0 4px 0;
          min-width: 0;
        }
        .fixed-header select, .fixed-header button {
          height: 36px;
        }
        body { padding-top: 110px; }
      }
      body { padding-top: 70px; }
    </style>
</head>
<body>
    <div class="fixed-header">
      <div class="nav-left">
        <span class="nav-title">–°—Ç—Ä–∞—à–Ω—ã–µ –∏—Å—Ç–æ—Ä–∏–∏</span>
        <a href="about.html">–û –ø—Ä–æ–µ–∫—Ç–µ</a>
      </div>
      <div class="nav-right">
        <select id="category-select" style="min-width:120px;">
          <option value="all">–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</option>
        </select>
        <button id="sort-alpha">–°–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ –∞–ª—Ñ–∞–≤–∏—Ç—É</button>
        <button id="sort-date">–ü–æ –¥–∞—Ç–µ</button>
        <button id="sort-popular">–ü–æ –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç–∏</button>
        <button id="sort-default">–°–±—Ä–æ—Å–∏—Ç—å</button>
      </div>
    </div>
    <h1 style="margin-top:24px;">–°—Ç—Ä–∞—à–Ω—ã–µ –∏—Å—Ç–æ—Ä–∏–∏</h1>
    <p>–°–æ–±—Ä–∞–Ω–∏–µ —Å–∞–º—ã—Ö –∂—É—Ç–∫–∏—Ö —Ä–∞—Å—Å–∫–∞–∑–æ–≤ —Å –ø—Ä–æ—Å—Ç–æ—Ä–æ–≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞</p>
    <ul id="stories-list">
        <!-- –ò—Å—Ç–æ—Ä–∏–∏ –±—É–¥—É—Ç –ø–æ–¥—Å—Ç–∞–≤–ª—è—Ç—å—Å—è —Å–∫—Ä–∏–ø—Ç–æ–º -->
    </ul>
    <div style="text-align:center;margin:24px 0 0 0;">
        <button id="share-btn" style="padding:10px 24px;border-radius:8px;border:none;background:#232323;color:#fff;cursor:pointer;font-size:1.1rem;box-shadow:0 2px 8px #0003;transition:background 0.2s;">–ü–æ–¥–µ–ª–∏—Ç—å—Å—è</button>
        <span id="share-status" style="display:none;margin-left:12px;color:#4caf50;font-size:0.98rem;">–°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞!</span>
    </div>
    <button id="audio-toggle" style="position:fixed;top:24px;right:24px;z-index:1000;background:#181818cc;color:#e0e0e0;border:none;border-radius:50%;width:48px;height:48px;box-shadow:0 2px 8px #000a;cursor:pointer;font-size:1.5rem;transition:background 0.2s;">üîä</button>
    <div style="position:fixed;top:24px;left:24px;z-index:1001;display:flex;align-items:center;gap:10px;">
        <a href="about.html" style="display:inline-block;padding:8px 18px;border-radius:8px;border:none;background:#232323;color:#fff;cursor:pointer;font-size:1.05rem;box-shadow:0 2px 8px #0003;text-decoration:none;transition:background 0.2s;">–û –ø—Ä–æ–µ–∫—Ç–µ</a>
        <button id="theme-toggle" style="background:#181818cc;color:#e0e0e0;border:none;border-radius:50%;width:48px;height:48px;box-shadow:0 2px 8px #000a;cursor:pointer;font-size:1.5rem;transition:background 0.2s;">üåô</button>
    </div>
    <audio id="bg-music" src="background.mp3" loop preload="auto"></audio>
    <audio id="hover-sfx" src="sfx-hover.mp3" preload="auto"></audio>
    <script src="stories.js"></script>
    <script>
      // --- –¢–µ–º–∞ ---
      const themeToggle = document.getElementById('theme-toggle');
      function setTheme(mode) {
        if (mode === 'light') {
          document.body.classList.add('light-mode');
          themeToggle.textContent = '‚òÄÔ∏è';
        } else {
          document.body.classList.remove('light-mode');
          themeToggle.textContent = 'üåô';
        }
      }
      let theme = localStorage.getItem('theme') || 'dark';
      setTheme(theme);
      themeToggle.addEventListener('click', () => {
        theme = (theme === 'dark') ? 'light' : 'dark';
        localStorage.setItem('theme', theme);
        setTheme(theme);
      });
      // --- –ê—É–¥–∏–æ ---
      const audioToggle = document.getElementById('audio-toggle');
      const bgMusic = document.getElementById('bg-music');
      let musicPlaying = false;
      audioToggle.addEventListener('click', () => {
        if (musicPlaying) {
          bgMusic.pause();
          audioToggle.textContent = 'üîä';
        } else {
          bgMusic.volume = 0.5;
          bgMusic.play();
          audioToggle.textContent = 'üîà';
        }
        musicPlaying = !musicPlaying;
      });
      // --- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ ---
      const categorySelect = document.getElementById('category-select');
      const storiesList = document.getElementById('stories-list');
      const sortAlphaBtn = document.getElementById('sort-alpha');
      const sortDateBtn = document.getElementById('sort-date');
      const sortPopularBtn = document.getElementById('sort-popular');
      const sortDefaultBtn = document.getElementById('sort-default');
      // –°–æ–±–∏—Ä–∞–µ–º –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
      const allStories = Object.values(stories);
      const categories = Array.from(new Set(allStories.map(s => s.category)));
      categories.forEach(cat => {
        const opt = document.createElement('option');
        opt.value = cat;
        opt.textContent = cat.charAt(0).toUpperCase() + cat.slice(1);
        categorySelect.appendChild(opt);
      });
      // –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è
      let currentSort = 'default';
      let currentCategory = 'all';
      let defaultOrder = allStories.map(s => s.id);
      function renderStories() {
        let filtered = allStories;
        if (currentCategory !== 'all') {
          filtered = filtered.filter(s => s.category === currentCategory);
        }
        if (currentSort === 'alpha') {
          filtered = filtered.slice().sort((a, b) => a.title.localeCompare(b.title, 'ru'));
        } else if (currentSort === 'date') {
          filtered = filtered.slice().sort((a, b) => (b.date || 0) - (a.date || 0));
        } else if (currentSort === 'popular') {
          filtered = filtered.slice().sort((a, b) => (b.views || 0) - (a.views || 0));
        } else {
          filtered = filtered.slice().sort((a, b) => defaultOrder.indexOf(a.id) - defaultOrder.indexOf(b.id));
        }
        storiesList.innerHTML = '';
        filtered.forEach(story => {
          const li = document.createElement('li');
          const a = document.createElement('a');
          a.href = `story.html?id=${story.id}`;
          a.textContent = story.title;
          li.appendChild(a);
          if (story.description) {
            const desc = document.createElement('div');
            desc.textContent = story.description;
            desc.style.fontSize = '0.97rem';
            desc.style.color = '#888';
            desc.style.marginTop = '2px';
            li.appendChild(desc);
          }
          storiesList.appendChild(li);
        });
        // –ó–≤—É–∫ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏
        document.querySelectorAll('li a').forEach(link => {
          link.addEventListener('mouseenter', () => {
            const sfx = document.getElementById('hover-sfx');
            sfx.currentTime = 0;
            sfx.volume = 0.4;
            sfx.play();
          });
        });
      }
      categorySelect.addEventListener('change', e => {
        currentCategory = e.target.value;
        renderStories();
      });
      sortAlphaBtn.addEventListener('click', () => {
        currentSort = 'alpha';
        renderStories();
      });
      sortDateBtn.addEventListener('click', () => {
        currentSort = 'date';
        renderStories();
      });
      sortPopularBtn.addEventListener('click', () => {
        currentSort = 'popular';
        renderStories();
      });
      sortDefaultBtn.addEventListener('click', () => {
        currentSort = 'default';
        renderStories();
      });
      renderStories();
      // --- –ö–Ω–æ–ø–∫–∞ –ü–æ–¥–µ–ª–∏—Ç—å—Å—è ---
      const shareBtn = document.getElementById('share-btn');
      const shareStatus = document.getElementById('share-status');
      shareBtn.addEventListener('click', async () => {
        const shareData = {
          title: document.title,
          text: '–°–º–æ—Ç—Ä–∏ —Å—Ç—Ä–∞—à–Ω—ã–µ –∏—Å—Ç–æ—Ä–∏–∏!',
          url: window.location.href
        };
        if (navigator.share) {
          try {
            await navigator.share(shareData);
          } catch (e) {}
        } else {
          try {
            await navigator.clipboard.writeText(window.location.href);
            shareStatus.style.display = 'inline';
            setTimeout(() => shareStatus.style.display = 'none', 2000);
          } catch (e) {
            alert('–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å—Å—ã–ª–∫—É –≤—Ä—É—á–Ω—É—é: ' + window.location.href);
          }
        }
      });
    </script>
    <footer style="margin-top:auto;padding:32px 0 16px 0;text-align:center;color:#666;font-size:0.95rem;">
        ¬© 2025 –°—Ç—Ä–∞—à–Ω—ã–µ –∏—Å—Ç–æ—Ä–∏–∏. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.<br>
        <a href="about.html" style="color:inherit;text-decoration:underline;">–û –ø—Ä–æ–µ–∫—Ç–µ</a>
    </footer>
</body>
</html> 