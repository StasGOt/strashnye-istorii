<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>404 ‚Äî –°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ | –°—Ç—Ä–∞—à–Ω—ã–µ –∏—Å—Ç–æ—Ä–∏–∏</title>
    <meta name="description" content="–°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞. –í–µ—Ä–Ω–∏—Ç–µ—Å—å –∫ —Å—Ç—Ä–∞—à–Ω—ã–º –∏—Å—Ç–æ—Ä–∏—è–º.">
    <link rel="icon" type="image/png" href="./favicon.png" />
    <link rel="stylesheet" href="./style.css">
</head>
<body>
    <!-- –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è -->
    <header class="fixed-header">
        <div class="nav-left">
            <a href="index.html" class="nav-title">üëª –°—Ç—Ä–∞—à–Ω—ã–µ –∏—Å—Ç–æ—Ä–∏–∏</a>
        </div>
        <div class="nav-right">
            <a href="about.html">–û –ø—Ä–æ–µ–∫—Ç–µ</a>
        </div>
    </header>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ -->
    <main>
        <div class="error-container">
            <div class="error-content">
                <h1 class="error-title">404</h1>
                <h2 class="error-subtitle">–°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞</h2>
                <p class="error-description">
                    –ü–æ—Ö–æ–∂–µ, —á—Ç–æ –∏—Å—Ç–æ—Ä–∏—è, –∫–æ—Ç–æ—Ä—É—é –≤—ã –∏—â–µ—Ç–µ, –∏—Å—á–µ–∑–ª–∞ –≤ —Ç–µ–º–Ω–æ—Ç–µ... 
                    –í–æ–∑–º–æ–∂–Ω–æ, –æ–Ω–∞ –±—ã–ª–∞ —É–¥–∞–ª–µ–Ω–∞ –∏–ª–∏ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–ª–∞.
                </p>
                
                <div class="error-actions">
                    <a href="index.html" class="error-btn btn-primary">
                        üè† –ù–∞ –≥–ª–∞–≤–Ω—É—é
                    </a>
                    <button onclick="getRandomStory()" class="error-btn btn-secondary">
                        üé≤ –°–ª—É—á–∞–π–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è
                    </button>
                </div>
                
                <div class="error-suggestions">
                    <h3>üí° –ü–æ–ø—Ä–æ–±—É–π—Ç–µ:</h3>
                    <ul>
                        <li>–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å —Å—Å—ã–ª–∫–∏</li>
                        <li>–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ <a href="index.html">–≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É</a></li>
                        <li>–í—ã–±—Ä–∞—Ç—å —Å–ª—É—á–∞–π–Ω—É—é –∏—Å—Ç–æ—Ä–∏—é</li>
                        <li>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ–∏—Å–∫ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º</li>
                    </ul>
                </div>
            </div>
        </div>
    </main>

    <!-- –£–ø—Ä–∞–≤–ª—è—é—â–∏–µ –∫–Ω–æ–ø–∫–∏ -->
    <button id="audio-toggle" class="control-btn audio-btn" title="–í–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å –º—É–∑—ã–∫—É">üîä</button>
    <button id="theme-toggle" class="control-btn theme-btn" title="–°–º–µ–Ω–∏—Ç—å —Ç–µ–º—É">üåô</button>

    <!-- –ê—É–¥–∏–æ —ç–ª–µ–º–µ–Ω—Ç—ã -->
    <audio id="bg-music" src="background.mp3" loop preload="auto"></audio>
    <audio id="hover-sfx" src="sfx-hover.mp3" preload="auto"></audio>

    <footer>
        ¬© 2025 –°—Ç—Ä–∞—à–Ω—ã–µ –∏—Å—Ç–æ—Ä–∏–∏. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.<br>
        <a href="about.html">–û –ø—Ä–æ–µ–∫—Ç–µ</a>
    </footer>

    <script src="stories.js"></script>
    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        document.addEventListener('DOMContentLoaded', function() {
            initializeTheme();
            initializeAudio();
        });

        // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–º–æ–π
        function initializeTheme() {
            const themeToggle = document.getElementById('theme-toggle');
            let theme = localStorage.getItem('theme') || 'dark';
            
            function setTheme(mode) {
                document.body.classList.toggle('light-mode', mode === 'light');
                themeToggle.textContent = mode === 'light' ? '‚òÄÔ∏è' : 'üåô';
                themeToggle.title = mode === 'light' ? '–¢–µ–º–Ω–∞—è —Ç–µ–º–∞' : '–°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞';
            }
            
            setTheme(theme);
            
            themeToggle.addEventListener('click', () => {
                theme = theme === 'dark' ? 'light' : 'dark';
                localStorage.setItem('theme', theme);
                setTheme(theme);
            });
        }

        // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞—É–¥–∏–æ
        function initializeAudio() {
            const audioToggle = document.getElementById('audio-toggle');
            const bgMusic = document.getElementById('bg-music');
            const hoverSfx = document.getElementById('hover-sfx');
            let musicPlaying = false;
            let audioEnabled = localStorage.getItem('audioEnabled') !== 'false';

            bgMusic.volume = 0.3;
            hoverSfx.volume = 0.2;

            function updateAudioButton() {
                audioToggle.textContent = musicPlaying ? 'üîä' : 'üîà';
                audioToggle.title = musicPlaying ? '–í—ã–∫–ª—é—á–∏—Ç—å –º—É–∑—ã–∫—É' : '–í–∫–ª—é—á–∏—Ç—å –º—É–∑—ã–∫—É';
            }

            audioToggle.addEventListener('click', async () => {
                try {
                    if (musicPlaying) {
                        bgMusic.pause();
                        musicPlaying = false;
                        audioEnabled = false;
                    } else {
                        await bgMusic.play();
                        musicPlaying = true;
                        audioEnabled = true;
                    }
                    localStorage.setItem('audioEnabled', audioEnabled);
                    updateAudioButton();
                } catch (error) {
                    console.warn('–ù–µ —É–¥–∞–ª–æ—Å—å –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ –∞—É–¥–∏–æ:', error);
                }
            });

            if (audioEnabled) {
                document.addEventListener('click', () => {
                    if (audioEnabled && !musicPlaying) {
                        bgMusic.play().then(() => {
                            musicPlaying = true;
                            updateAudioButton();
                        }).catch(() => {});
                    }
                }, { once: true });
            }

            updateAudioButton();

            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –∑–≤—É–∫–∞ –Ω–∞–≤–µ–¥–µ–Ω–∏—è
            window.playHoverSound = function() {
                if (audioEnabled) {
                    hoverSfx.currentTime = 0;
                    hoverSfx.play().catch(() => {});
                }
            };

            // –î–æ–±–∞–≤–ª—è–µ–º hover-–∑–≤—É–∫ –Ω–∞ –∫–Ω–æ–ø–∫–∏
            document.querySelectorAll('.error-btn').forEach(btn => {
                btn.addEventListener('mouseenter', window.playHoverSound);
            });
        }

        // –°–ª—É—á–∞–π–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è
        function getRandomStory() {
            const randomStory = stories[Math.floor(Math.random() * stories.length)];
            window.location.href = `story.html?id=${randomStory.id}`;
        }
    </script>
</body>
</html> 